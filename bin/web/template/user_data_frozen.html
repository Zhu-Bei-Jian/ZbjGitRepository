<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<link href="/css/main.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<head>
    <link href="depend/lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script type="text/javascript" src="depend/lib/jquery/jquery-1.9.0.min.js" ></script>
    <script src="depend/lib/ligerUI/js/ligerui.min.js" type="text/javascript"></script>
    <script src="js/cvi_busy_lib.js" type="text/javascript"></script>
    <script src="depend/lib/ligerUI/js/plugins/ligerToolBar.js" type="text/javascript"></script>
</head>
<body>
<div class="main">
    <div class="indiv">
        <table>
            <tr>
                <form data-type="formAction" id ="formQueryUserInfo">
                    <td>名字</td><td><input type="text" name="info" style="width:300px" value=""/></td>
                </form>
            </tr>
            <tr>
                <td>信息</td><td><textarea  type="text" name="column_data" style="width:900px;height:200px" value="" id="Detail"></textarea></td>
            </tr>
        </table>
        <div><input type="submit" class="button" value="查询角色信息" onclick="QueryUserInfo()" /></div>
    </div>
    <div class="indiv">
        <form data-type="formAction" id ="formLockUserAcc">
            <table>
                <tr>
                    <td>账号</td><td><input type="text" name="info" style="width:300px" value=""></input></td>
                </tr>
                <tr>
                    <td>截止时间</td><td><input type="text" name="datetime" style="width:300px" value=""></input></td>
                </tr>
            </table>
        </form>
        <input type="submit" class="button" value="封号：查询" onclick="QueryLockUserAcc()" />
        <input type="submit" class="button" value="封号" onclick="LockUserAcc()" />
        <input type="submit" class="button" value="解封" onclick="UnLockUserAcc()" />
        <input type="submit" class="button" value="聊天黑名单：查询" onclick="QueryLockUserChatBlacklist()" />
        <input type="submit" class="button" value="添加" onclick="LockUserChatBlacklist()" />
        <input type="submit" class="button" value="解除" onclick="UnLockUserChatBlacklist()" />
    </div>
    <div class="indiv">
        <form data-type="formAction" id ="formFrozenUserData">
            <table>
                <tr>
                    <td>角色ID</td><td><input type="text" name="info" style="width:300px" value=""></input></td>
                </tr>
            </table>
        </form>
        <input type="submit" class="button" value="冻结" onclick="FrozenUserData()" />
        <input type="submit" class="button" value="重载并解冻" onclick="UnFrozenUserData()" />
        <input type="submit" class="button" value="重载角色数据" onclick="RecoverUserData()" />
    </div>

    <div class="indiv">
        <form data-type="formAction" id ="formDoRemoteCommand">
            <table>
                <tr>
                    <td>GM命令</td><td><input type="text" name="info" style="width:300px" value=""></input></td>
                </tr>
            </table>
        </form>
        <input type="submit" class="button" value="执行" onclick="DoRemoteCommand()" />
    </div>


    <div class="indiv">
        <form data-type="formAction" id ="formAccRef">
            <table>
                <tr>
                    <td>ref账号</td><td><input type="text" name="info" style="width:300px" value=""></input></td>
                </tr>
                <tr>
                    <td>test账号</td><td><input type="text" name="test" style="width:300px" id="testacc" value=""></input></td>
                </tr>
            </table>
        </form>
        <input type="submit" class="button" value="关联账号：查询" onclick="AccRefQuery()" />
        <input type="submit" class="button" value="添加" onclick="AccRefAdd()" />
        <input type="submit" class="button" value="删除" onclick="AccRefDel()" />
    </div>
</div>
</body>
<script type="text/javascript">
    function QueryUserInfo(obj) {
        $("#Detail").val("")
        ctrl = getBusyOverlay("viewport");
        var formobj =  document.getElementById("formQueryUserInfo");
        $.post("/v0/QueryUserInfo"
            , $(formobj).serialize()
            , function(ret){
                try {ctrl.remove(); delete ctrl;} catch(e) {}
                $("#Detail").val(ret)
            })
    }
    function LockUserAcc(obj) {
        $.ligerDialog.confirm("确认：封号", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formLockUserAcc");
                $.post("/v9/LockUserAcc",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }
    function UnLockUserAcc(obj) {
        $.ligerDialog.confirm("确认：解封", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formLockUserAcc");
                $.post("/v9/UnLockUserAcc",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }
    function QueryLockUserAcc(obj) {
        ctrl = getBusyOverlay("viewport");
        var formobj =  document.getElementById("formLockUserAcc");
        $.post("/v0/QueryLockUserAcc",  $(formobj).serialize(), function(ret){
            try {ctrl.remove(); delete ctrl;} catch(e) {}
            alert(ret);
        })
    }
    function FrozenUserData(obj) {
        $.ligerDialog.confirm("确认：冻结角色数据", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formFrozenUserData");
                $.post("/v9/FrozenUserData",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }
    function UnFrozenUserData(obj) {
        $.ligerDialog.confirm("确认：解冻角色数据", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formFrozenUserData");
                $.post("/v9/UnFrozenUserData",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }

    function LockUserChatBlacklist(obj) {
        $.ligerDialog.confirm("确认：添加聊天黑名单", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formLockUserAcc");
                $.post("/v9/LockUserChatBlacklist",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }
    function UnLockUserChatBlacklist(obj) {
        $.ligerDialog.confirm("确认：解除聊天黑名单", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formLockUserAcc");
                $.post("/v9/UnLockUserChatBlacklist",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }
    function QueryLockUserChatBlacklist(obj) {
        ctrl = getBusyOverlay("viewport");
        var formobj =  document.getElementById("formLockUserAcc");
        $.post("/v0/QueryLockUserChatBlacklist",  $(formobj).serialize(), function(ret){
            try {ctrl.remove(); delete ctrl;} catch(e) {}
            alert(ret);
        })
    }
    function RecoverUserData(obj) {
        $.ligerDialog.confirm("确认：是否从数据库覆盖内存角色数据", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formFrozenUserData");
                $.post("/v9/RecoverUserData",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }
    function DoRemoteCommand(obj) {
        $.ligerDialog.confirm("确认：执行命令", function (yes) {
            if (yes.toString() == "true"){
                ctrl = getBusyOverlay("viewport");
                var formobj =  document.getElementById("formDoRemoteCommand");
                $.post("/v9/DoRemoteCommand",  $(formobj).serialize(), function(ret){
                    try {ctrl.remove(); delete ctrl;} catch(e) {}
                    alert(ret.Reason);
                },"json")
            }
        });
    }


    function AccRefQuery(obj) {
        ctrl = getBusyOverlay("viewport");
        var formobj =  document.getElementById("formAccRef");
        $.post("/v9/AccRefQuery",  $(formobj).serialize(), function(ret){
            try {ctrl.remove(); delete ctrl;} catch(e) {}
            //alert(ret);
            $("#testacc").val(ret)
        })
    }
    function AccRefAdd(obj) {
        ctrl = getBusyOverlay("viewport");
        var formobj =  document.getElementById("formAccRef");
        $.post("/v9/AccRefAdd",  $(formobj).serialize(), function(ret){
            try {ctrl.remove(); delete ctrl;} catch(e) {}
            //alert(ret);
            $("#testacc").val(ret)
        })
    }
    function AccRefDel(obj) {
        ctrl = getBusyOverlay("viewport");
        var formobj =  document.getElementById("formAccRef");
        $.post("/v9/AccRefDel",  $(formobj).serialize(), function(ret){
            try {ctrl.remove(); delete ctrl;} catch(e) {}
            //alert(ret);
            $("#testacc").val(ret)
        })
    }
</script>
</html>
